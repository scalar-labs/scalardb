name: Trigger the CI weekly on Sunday night for all development branches with all Temurin Java versions

on:
  schedule:
    # Runs at 1:00 AM JST (Tokyo time) every Monday
    # JST is UTC+9, so 1:00 AM JST = 4:00 PM UTC (previous day)
    - cron: '0 16 * * 0'
  workflow_dispatch:

jobs:
  trigger-ci:
    name: Trigger CI for branch ${{ matrix.branch }}
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        branch: ['main', '3', '3.17', '3.16', '3.15', '3.14']
    permissions:
      actions: write
    steps:
      - name: Trigger the CI for branch ${{ matrix.branch }}
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: gh workflow run ci-all-java-temurin-versions.yaml --field REPORT_ON_SLACK=true --repo ${{ github.repository }} --ref ${{ matrix.branch }}
